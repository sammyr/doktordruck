(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[897],{1693:function(e,t,a){Promise.resolve().then(a.bind(a,7028))},7028:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return eg}});var l=a(7437),n=a(2265),r=JSON.parse('{"C":{"t":[{"id":"p1","name":"Poster 30x46","width":304.8,"height":457.2,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3},{"id":"p2","name":"Poster 41x51","width":406.4,"height":508,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3},{"id":"p3","name":"Poster 46x61","width":457.2,"height":609.6,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3},{"id":"p4","name":"Poster 51x91","width":508,"height":914.4,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3}],"r":[{"id":"l1","name":"Poster 30x20","width":304.8,"height":203.2,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3},{"id":"l2","name":"Poster 36x28","width":355.6,"height":279.4,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3},{"id":"l3","name":"Poster 43x28","width":431.8,"height":279.4,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3},{"id":"l4","name":"Poster 61x41","width":609.6,"height":406.4,"printMargins":{"top":10,"right":10,"bottom":10,"left":10},"bleed":3}]}}'),i=a(1094),s=a(6194),o=a(5432),d=a(7346),c=a(7042),f=a(4769);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,f.m6)((0,c.W)(t))}let m=(0,a(6061).j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),h=(0,n.forwardRef)((e,t)=>{let{className:a,variant:n,size:r,...i}=e;return(0,l.jsx)("button",{className:u(m({variant:n,size:r,className:a})),ref:t,...i})});h.displayName="Button";let x={fontScaleFactor:2.5,bleed:3,minMargin:10,weightMapping:{100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold"}},g={zoom:{initial:1.8,min:.1,max:5,step:.15,buttonStep:.1,speed:{wheel:1.5,smooth:!0}},dragAndDrop:{textBlockSpeed:.2,transitionDuration:10,grid:{size:1,snapThreshold:1},guides:{color:"#000",opacity:.5,thickness:.5}},colors:{background:"#ffffff",selection:"#6b21a8",selectionOpacity:.5,stageBackground:"#f3f4f6",paper:{background:"#ffffff",shadow:"rgba(0, 0, 0, 0.1)"}},cursors:{stage:{default:"default",panning:"grabbing"},textBlock:{default:"pointer",editing:"text"}}};function p(e){let{backgroundColor:t,fontFamily:a,fontSize:c,fontStyle:f,fontWeight:u,pageSize:m,textBlocks:x,onTextBlockUpdate:p,onTextBlockSelect:b,onAddTextBlock:v}=e,y=(0,n.useRef)(null),[j,w]=(0,n.useState)(1.8),[N,k]=(0,n.useState)(null),[S,C]=(0,n.useState)(null),[z,R]=(0,n.useState)(!1),[B,F]=(0,n.useState)({x:0,y:0}),[M,E]=(0,n.useState)(null),[T,L]=(0,n.useState)({x:0,y:0}),[D,A]=(0,n.useState)({x:0,y:0}),[P,W]=(0,n.useState)({x:0,y:0}),[U,Z]=(0,n.useState)(!1),[O,H]=(0,n.useState)(null),I=(0,n.useCallback)(e=>{if(e.preventDefault(),z)return;let t=g.zoom.step,a=g.zoom.speed.wheel,l=e.deltaY<0?t*a:-t*a;w(e=>Number(Math.min(g.zoom.max,Math.max(g.zoom.min,e+l)).toFixed(2)))},[z]);(0,n.useEffect)(()=>{let e=e=>{e.preventDefault()};return document.addEventListener("wheel",e,{passive:!1}),()=>{document.removeEventListener("wheel",e)}},[]);let _=(0,n.useCallback)((e,t)=>{1===e.button?(e.preventDefault(),R(!0),F({x:e.clientX-P.x,y:e.clientY-P.y})):t&&(E(t),L({x:e.clientX,y:e.clientY}),A({x:t.x,y:t.y}))},[P]),Y=(0,n.useCallback)(e=>{let t=g.dragAndDrop.grid.size;return Math.round(e/t)*t},[]),V=(0,n.useCallback)((e,t,a)=>{let l=g.dragAndDrop.grid.snapThreshold/j,n=document.createElement("span");n.style.fontFamily=a.fontFamily,n.style.fontSize="".concat(a.fontSize,"px"),n.style.fontWeight=String(a.fontWeight),n.style.fontStyle=a.fontStyle||"normal",n.innerText=a.text,document.body.appendChild(n);let r=n.offsetWidth,i=n.offsetHeight;document.body.removeChild(n);let s=y.current;if(!s)return{x:e,y:t};let o=s.getBoundingClientRect(),d=r/o.width*100,c=i/o.height*100,f=e-d/2,u=e+d/2,m=t-c/2,h=t+c/2,x=Math.abs(f-50)<l||Math.abs(u-50)<l||Math.abs(e-50)<l,p=Math.abs(m-50)<l||Math.abs(h-50)<l||Math.abs(t-50)<l;Z(x||p);let b=e,v=t;return x&&(Math.abs(f-50)<l?b=50+d/2:Math.abs(u-50)<l?b=50-d/2:Math.abs(e-50)<l&&(b=50)),p&&(Math.abs(m-50)<l?v=50+c/2:Math.abs(h-50)<l?v=50-c/2:Math.abs(t-50)<l&&(v=50)),H({x:x?50:null,y:p?50:null}),{x:b,y:v}},[j,y]),G=(0,n.useCallback)(e=>{if(z)e.preventDefault(),W({x:e.clientX-B.x,y:e.clientY-B.y});else if(M&&p){e.preventDefault();let t=e.clientX-T.x,a=e.clientY-T.y,l=D.x+t*g.dragAndDrop.textBlockSpeed/j,n=D.y+a*g.dragAndDrop.textBlockSpeed/j,r=V(l=Y(l),n=Y(n),M);p({...M,x:r.x,y:r.y})}},[z,B,M,T,D,j,p,Y,V]),X=(0,n.useCallback)(()=>{R(!1),E(null),Z(!1),H(null)},[]);(0,n.useEffect)(()=>{if(N){let e=x.find(e=>e.id===N);e&&e.fontSize!==c&&p({...e,fontSize:c})}},[N,c,x,p]);let Q=(0,n.useCallback)(()=>{w(e=>Math.min(g.zoom.max,e+g.zoom.buttonStep))},[]),J=(0,n.useCallback)(()=>{w(e=>Math.max(g.zoom.min,e-g.zoom.buttonStep))},[]),K=(0,n.useCallback)(()=>{w(g.zoom.initial),W({x:0,y:0})},[]),$=(0,n.useCallback)(e=>{C(e)},[]),q=(0,n.useCallback)((e,t)=>{let a=x.find(t=>t.id===e);a&&p({...a,text:t})},[x,p]),ee=[...r.C.t,...r.C.r].find(e=>e.id===m);return(0,l.jsxs)("div",{className:"relative h-full flex",children:[(0,l.jsxs)("div",{className:"flex-1 relative overflow-hidden bg-gray-100",onWheel:I,onMouseDown:e=>_(e,null),onMouseMove:G,onMouseUp:X,onMouseLeave:X,ref:y,style:{touchAction:"none",cursor:z?g.cursors.stage.panning:g.cursors.stage.default},children:[(0,l.jsxs)("div",{className:"absolute left-1/2 top-1/2 origin-center bg-white shadow-[0_0_1px_rgba(0,0,0,0.4)]",style:{transform:"translate(-50%, -50%) translate(".concat(P.x,"px, ").concat(P.y,"px) scale(").concat(j,")"),width:(null==ee?void 0:ee.width)||500,height:(null==ee?void 0:ee.height)||700,backgroundColor:t,transition:z?"none":"transform ".concat(g.dragAndDrop.transitionDuration,"ms ease-out")},children:[U&&O&&(0,l.jsxs)(l.Fragment,{children:[50===O.x&&(0,l.jsx)("div",{className:"absolute top-0 bottom-0 pointer-events-none",style:{left:"50%",width:"".concat(g.dragAndDrop.guides.thickness,"px"),backgroundColor:g.dragAndDrop.guides.color,opacity:g.dragAndDrop.guides.opacity,transform:"translateX(-50%)"}}),50===O.y&&(0,l.jsx)("div",{className:"absolute left-0 right-0 pointer-events-none",style:{top:"50%",height:"".concat(g.dragAndDrop.guides.thickness,"px"),backgroundColor:g.dragAndDrop.guides.color,opacity:g.dragAndDrop.guides.opacity,transform:"translateY(-50%)"}})]}),x.map(e=>(0,l.jsx)("div",{className:"absolute ".concat(e.selected?"ring-2 ring-[".concat(g.colors.selection,"]/").concat(g.colors.selectionOpacity):""),style:{position:"absolute",left:"".concat(e.x,"%"),top:"".concat(e.y,"%"),color:e.color,fontFamily:e.fontFamily,fontSize:"".concat(e.fontSize,"px"),fontWeight:String(e.fontWeight),fontStyle:(e.fontStyle||"").includes("italic")?"italic":"normal",userSelect:"none",transform:"translate(-50%, -50%)",whiteSpace:e.multiline?"normal":"nowrap",width:S===e.id?"".concat(Math.max(e.width||20,30),"%"):e.multiline?"".concat(e.width||20,"%"):"auto",lineHeight:e.lineHeight||1.2,textAlign:["left","right","center"].includes(e.textAlign)?e.textAlign:"left",letterSpacing:"".concat(e.letterSpacing||0,"px"),cursor:S===e.id?g.cursors.textBlock.editing:g.cursors.textBlock.default,zIndex:e.zIndex,padding:S===e.id?"4px":"0"},onMouseDown:t=>{_(t,e),b(e.id),k(e.id)},onDoubleClick:()=>$(e.id),children:S===e.id?(0,l.jsx)("textarea",{value:e.text,onChange:t=>q(e.id,t.target.value),onBlur:()=>C(null),autoFocus:!0,style:{background:"transparent",border:"none",outline:"none",color:"inherit",font:"inherit",resize:"none",width:"100%",height:"auto",minHeight:"1.2em",display:"block",margin:0,padding:0,overflow:"hidden"},rows:Math.max((e.text.match(/\n/g)||[]).length+1,1),onInput:e=>{let t=e.target;t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px")}}):e.text.split("\n").map((t,a)=>(0,l.jsxs)(n.Fragment,{children:[t,a<e.text.split("\n").length-1&&(0,l.jsx)("br",{})]},a))},e.id))]}),(0,l.jsxs)("div",{className:"fixed bottom-4 right-4 bg-white/80 px-3 py-1 rounded-full text-sm font-medium shadow-sm",children:[Math.round(100*j),"%"]})]}),(0,l.jsxs)("div",{className:"w-16 bg-white p-4 border-l flex flex-col items-center space-y-4",children:[(0,l.jsx)(h,{variant:"ghost",size:"sm",onClick:Q,className:"w-8 h-8",children:(0,l.jsx)(i.Z,{className:"w-4 h-4"})}),(0,l.jsxs)("div",{className:"text-sm font-medium",children:[Math.round(100*j),"%"]}),(0,l.jsx)(h,{variant:"ghost",size:"sm",onClick:J,className:"w-8 h-8",children:(0,l.jsx)(s.Z,{className:"w-4 h-4"})}),(0,l.jsx)(h,{variant:"ghost",size:"sm",onClick:K,className:"w-8 h-8",title:"Ansicht zur\xfccksetzen",children:(0,l.jsx)(o.Z,{className:"w-4 h-4"})}),(0,l.jsx)(h,{variant:"ghost",size:"sm",onClick:v,className:"w-8 h-8",title:"Text hinzuf\xfcgen",children:(0,l.jsx)(d.Z,{className:"w-4 h-4"})})]})]})}let b=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:u("rounded-xl border bg-card text-card-foreground shadow",a),...n})});b.displayName="Card",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",a),...n})}).displayName="CardHeader",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("h3",{ref:t,className:u("font-semibold leading-none tracking-tight",a),...n})}).displayName="CardTitle",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("p",{ref:t,className:u("text-sm text-muted-foreground",a),...n})}).displayName="CardDescription";let v=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:u("p-6 pt-0",a),...n})});v.displayName="CardContent",n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)("div",{ref:t,className:u("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter";var y=a(5817),j=a(930);let w=[{name:"CormorantGaramond",family:"CormorantGaramond",path:"/fonts/CormorantGaramond",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"Inter",family:"Inter",path:"/fonts/Inter",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:200,name:"Extra Light",file:"extralight.ttf"},{value:300,name:"Light",file:"light.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:500,name:"Medium",file:"medium.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"},{value:800,name:"Extra Bold",file:"extrabold.ttf"},{value:900,name:"Black",file:"black.ttf"}]},{name:"Lato",family:"Lato",path:"/fonts/Lato",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:200,name:"Extra Light",file:"extralight.ttf"},{value:300,name:"Light",file:"light.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:500,name:"Medium",file:"medium.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"},{value:800,name:"Extra Bold",file:"extrabold.ttf"},{value:900,name:"Black",file:"black.ttf"}]},{name:"Lora",family:"Lora",path:"/fonts/Lora",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"}]},{name:"Merriweather",family:"Merriweather",path:"/fonts/Merriweather",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:200,name:"Extra Light",file:"extralight.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"},{value:800,name:"Extra Bold",file:"extrabold.ttf"},{value:900,name:"Black",file:"black.ttf"}]},{name:"Montserrat",family:"Montserrat",path:"/fonts/Montserrat",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:200,name:"Extra Light",file:"extralight.ttf"},{value:300,name:"Light",file:"light.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:500,name:"Medium",file:"medium.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"},{value:800,name:"Extra Bold",file:"extrabold.ttf"},{value:900,name:"Black",file:"black.ttf"}]},{name:"NotoSans",family:"NotoSans",path:"/fonts/NotoSans",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"Nunito",family:"Nunito",path:"/fonts/Nunito",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"NunitoSans",family:"NunitoSans",path:"/fonts/NunitoSans",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:200,name:"Extra Light",file:"extralight.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"}]},{name:"OpenSans",family:"OpenSans",path:"/fonts/OpenSans",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:200,name:"Extra Light",file:"extralight.ttf"},{value:300,name:"Light",file:"light.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:500,name:"Medium",file:"medium.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"},{value:800,name:"Extra Bold",file:"extrabold.ttf"},{value:900,name:"Black",file:"black.ttf"}]},{name:"Oswald",family:"Oswald",path:"/fonts/Oswald",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"PTSans",family:"PTSans",path:"/fonts/PTSans",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"PlayfairDisplay",family:"PlayfairDisplay",path:"/fonts/PlayfairDisplay",weights:[{value:400,name:"Regular",file:"regular.ttf"},{value:600,name:"Medium",file:"medium.ttf"}]},{name:"Quicksand",family:"Quicksand",path:"/fonts/Quicksand",weights:[{value:400,name:"Regular",file:"regular.ttf"},{value:600,name:"Medium",file:"medium.ttf"},{value:700,name:"Bold",file:"bold.ttf"}]},{name:"Raleway",family:"Raleway",path:"/fonts/Raleway",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"Roboto",family:"Roboto",path:"/fonts/Roboto",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:200,name:"Extra Light",file:"extralight.ttf"},{value:300,name:"Light",file:"light.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:500,name:"Medium",file:"medium.ttf"},{value:600,name:"Semi Bold",file:"semibold.ttf"},{value:700,name:"Bold",file:"bold.ttf"},{value:800,name:"Extra Bold",file:"extrabold.ttf"},{value:900,name:"Black",file:"black.ttf"}]},{name:"RobotoCondensed",family:"RobotoCondensed",path:"/fonts/RobotoCondensed",weights:[{value:100,name:"Thin",file:"thin.ttf"},{value:400,name:"Regular",file:"regular.ttf"},{value:600,name:"Medium",file:"medium.ttf"},{value:700,name:"Bold",file:"bold.ttf"}]},{name:"SourceSansPro",family:"SourceSansPro",path:"/fonts/SourceSansPro",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"Spectral",family:"Spectral",path:"/fonts/Spectral",weights:[{value:100,name:"Thin",file:"thin.ttf"}]},{name:"Ubuntu",family:"Ubuntu",path:"/fonts/Ubuntu",weights:[{value:400,name:"Regular",file:"regular.ttf"}]},{name:"WorkSans",family:"WorkSans",path:"/fonts/WorkSans",weights:[{value:400,name:"Regular",file:"regular.ttf"}]}];function N(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:255,g:255,b:255}}function k(e){let t="",a=new Uint8Array(e);for(let e=0;e<a.byteLength;e++)t+=String.fromCharCode(a[e]);return btoa(t)}async function S(e){for(let t of w)try{let a=t.weights.find(e=>400===e.value)||t.weights[0],l="".concat(t.path,"/").concat(a.file);console.log("Lade Schriftart:",l);let n=await fetch(l);if(!n.ok)throw Error("HTTP error! status: ".concat(n.status));let r=await n.arrayBuffer(),i=k(r);for(let a of(e.addFileToVFS("".concat(t.family,".ttf"),i),e.addFont("".concat(t.family,".ttf"),t.family,"normal"),t.weights))if(400!==a.value){let l="".concat(t.path,"/").concat(a.file),n=await fetch(l);if(n.ok){let l=await n.arrayBuffer(),r=k(l),i=x.weightMapping[a.value];e.addFileToVFS("".concat(t.family,"-").concat(i,".ttf"),r),e.addFont("".concat(t.family,"-").concat(i,".ttf"),t.family,i)}}console.log("Schriftart erfolgreich geladen:",t.family)}catch(e){console.error("Fehler beim Laden der Schriftart:",t.family,e)}}async function C(e){let t=[...r.C.t,...r.C.r].find(t=>t.id===e.pageSize);if(!t)throw Error("Ung\xfcltige Papiergr\xf6\xdfe");let{width:a,height:l}=t,n=e.pageSize.startsWith("l")?"landscape":"portrait",{bleed:i}=x,s=new j.kH({orientation:n,unit:"mm",format:[a+2*i,l+2*i]});await S(s);let o=N(e.backgroundColor);s.setFillColor(o.r,o.g,o.b),s.rect(0,0,a+2*i,l+2*i,"F");let d=a+2*i,c=l+2*i;e.content.forEach(e=>{!function(e,t,a,l){!function(e,t){try{let a=t.fontFamily,l="string"==typeof t.fontWeight?parseInt(t.fontWeight):t.fontWeight,n=x.weightMapping[l]||"normal";e.setFont(a,n);let r=Math.round(t.fontSize*x.fontScaleFactor);e.setFontSize(r);let i=N(t.color);e.setTextColor(i.r,i.g,i.b),t.letterSpacing&&e.setCharSpace(t.letterSpacing),t.lineHeight&&e.setLineHeightFactor(t.lineHeight)}catch(t){console.error("Fehler beim Anwenden der Textstile:",t),e.setFont("helvetica","normal")}}(e,t);let{x:n,y:r}={x:t.x/100*a,y:t.y/100*l};e.text(t.text,n,r,{align:"center",baseline:"middle",maxWidth:a-2*x.minMargin})}(s,e,d,c)});let f=s.output("arraybuffer");return new Uint8Array(f)}var z=a(6743);let R=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(z.f,{ref:t,className:u("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n})});R.displayName=z.f.displayName;var B=a(3425),F=a(3523),M=a(2442);let E=B.fC,T=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,l.jsxs)(B.xz,{ref:t,className:u("flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:[n,(0,l.jsx)(B.JO,{asChild:!0,children:(0,l.jsx)(F.Z,{className:"h-4 w-4 opacity-50"})})]})});T.displayName=B.xz.displayName;let L=B.B4,D=n.forwardRef((e,t)=>{let{className:a,children:n,position:r="popper",...i}=e;return(0,l.jsx)(B.h_,{children:(0,l.jsx)(B.VY,{ref:t,className:u("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...i,children:(0,l.jsx)(B.l_,{className:u("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n})})})});D.displayName=B.VY.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(B.__,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",a),...n})}).displayName=B.__.displayName;let A=n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,l.jsxs)(B.ck,{ref:t,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(B.wU,{children:(0,l.jsx)(M.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(B.eT,{children:n})]})});function P(e){let{value:t,onChange:a}=e,n=[...r.C.t.map(e=>({id:e.id,name:e.name,type:"Hochkant"})),...r.C.r.map(e=>({id:e.id,name:e.name,type:"Querformat"}))];return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{htmlFor:"pageSize",children:"Postergr\xf6\xdfe"}),(0,l.jsxs)(E,{value:t,onValueChange:a,children:[(0,l.jsx)(T,{children:(0,l.jsx)(L,{placeholder:"W\xe4hle eine Gr\xf6\xdfe"})}),(0,l.jsx)(D,{children:(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"px-2 py-1.5 text-sm font-semibold",children:"Hochkant"}),n.filter(e=>"Hochkant"===e.type).map(e=>(0,l.jsx)(A,{value:e.id,children:e.name},e.id)),(0,l.jsx)("div",{className:"px-2 py-1.5 text-sm font-semibold",children:"Querformat"}),n.filter(e=>"Querformat"===e.type).map(e=>(0,l.jsx)(A,{value:e.id,children:e.name},e.id))]})})]})]})}A.displayName=B.ck.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(B.Z0,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...n})}).displayName=B.Z0.displayName;let W=n.forwardRef((e,t)=>{let{className:a,type:n,...r}=e;return(0,l.jsx)("input",{type:n,className:u("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});W.displayName="Input";var U=a(5050),Z=a(5126);function O(e){let{color:t,onChange:a,label:r,disabled:i=!1}=e,[s,o]=n.useState(!1),[d,c]=n.useState(t),f=e=>{c(e),a(e)};return(0,l.jsxs)(U.fC,{open:s,onOpenChange:o,children:[(0,l.jsx)(U.xz,{asChild:!0,children:(0,l.jsx)("button",{className:u("w-12 h-10 rounded-md border border-input shadow-sm",i?"opacity-50 cursor-not-allowed":""),style:{backgroundColor:d},"aria-label":r||"W\xe4hle eine Farbe",disabled:i})}),(0,l.jsx)(U.h_,{children:(0,l.jsx)(U.VY,{className:"z-50 w-[240px] rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none",sideOffset:5,children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(Z.gW,{color:d,onChange:f}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("div",{className:"w-8 h-8 rounded border",style:{backgroundColor:d}}),(0,l.jsx)("input",{type:"text",value:d,onChange:e=>f(e.target.value),className:"flex-1 px-2 py-1 text-sm border rounded",spellCheck:!1})]})]})})})]})}let H={background:["#daf2ec","#315f72","#f47bbd","#dfe6e8"],text:["#ffcce7","#f57e7e","#f4ec7b","#f47a60"]};function I(e){let{value:t,onChange:a}=e;return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{htmlFor:"backgroundColor",children:"Hintergrundfarbe"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(O,{color:t,onChange:a,label:"Hintergrundfarbe w\xe4hlen"}),(0,l.jsx)(W,{type:"text",value:t,onChange:e=>a(e.target.value),className:"flex-1",spellCheck:!1})]}),(0,l.jsx)("div",{className:"grid grid-cols-5 gap-1",children:H.background.map((e,n)=>(0,l.jsx)("button",{className:"w-6 h-6 rounded-full border transition-all ".concat(t===e?"border-blue-500 scale-110":"border-gray-200 hover:scale-105"),style:{backgroundColor:e},onClick:()=>a(e),title:e},"bg-".concat(e,"-").concat(n)))})]})]})}var _=a(1138),Y=a(9224);function V(e){let{value:t,onChange:a,min:n=0,max:r=100,step:i=1,disabled:s=!1,decimalPlaces:o=0}=e;return(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("div",{className:"relative flex items-center",children:[(0,l.jsx)("input",{type:"number",min:n,max:r,step:i,value:t,onChange:e=>{let t=parseFloat(e.target.value);!isNaN(t)&&t>=n&&t<=r&&a(Number(t.toFixed(o)))},className:"w-20 h-9 px-3 pr-8 border rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-offset-0 focus:ring-blue-500 [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",disabled:s}),(0,l.jsxs)("div",{className:"absolute right-0 inset-y-0 flex flex-col border-l",children:[(0,l.jsx)(h,{variant:"ghost",size:"sm",className:"h-[18px] w-8 rounded-none rounded-tr-md px-1 hover:bg-gray-100",onClick:()=>{a(Number(Math.min(r,t+i).toFixed(o)))},disabled:s||t>=r,children:(0,l.jsx)(Y.Z,{className:"h-3 w-3"})}),(0,l.jsx)(h,{variant:"ghost",size:"sm",className:"h-[18px] w-8 rounded-none rounded-br-md px-1 hover:bg-gray-100",onClick:()=>{a(Number(Math.max(n,t-i).toFixed(o)))},disabled:s||t<=n,children:(0,l.jsx)(F.Z,{className:"h-3 w-3"})})]})]})})}function G(e){let{selectedBlock:t,onTextBlockUpdate:a,disabled:n=!1}=e;return(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{htmlFor:"textColor",children:"Textfarbe"}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(O,{color:(null==t?void 0:t.color)||"#000000",onChange:e=>{t&&a({...t,color:e})},disabled:n,label:"Textfarbe w\xe4hlen"}),(0,l.jsx)(W,{type:"text",value:(null==t?void 0:t.color)||"#000000",onChange:e=>{t&&a({...t,color:e.target.value})},className:"flex-1 h-12",disabled:n,spellCheck:!1})]}),(0,l.jsx)("div",{className:"grid grid-cols-5 gap-1",children:H.text.map((e,r)=>(0,l.jsx)("button",{className:"w-6 h-6 rounded-full border transition-all ".concat((null==t?void 0:t.color)===e?"border-blue-500 scale-110":"border-gray-200 hover:scale-105"),style:{backgroundColor:e},onClick:()=>{t&&a({...t,color:e})},disabled:n,title:e},"text-".concat(e,"-").concat(r)))})]})]})}var X=a(5890),Q=a(8940),J=a(3213),K=a(4560);function $(e){let{fontStyle:t,setFontStyle:a,textAlign:n,setTextAlign:r,disabled:i=!1}=e,s=t.includes("italic");return(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(h,{variant:s?"default":"outline",size:"sm",onClick:()=>a(s?"normal":"italic"),disabled:i,className:"h-9 w-9",children:(0,l.jsx)(X.Z,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{className:"flex border rounded-md",children:[(0,l.jsx)(h,{variant:"left"===n?"default":"ghost",size:"sm",onClick:()=>r("left"),disabled:i,className:"h-9 w-9 rounded-r-none",children:(0,l.jsx)(Q.Z,{className:"h-4 w-4"})}),(0,l.jsx)(h,{variant:"center"===n?"default":"ghost",size:"sm",onClick:()=>r("center"),disabled:i,className:"h-9 w-9 rounded-none border-x-0",children:(0,l.jsx)(J.Z,{className:"h-4 w-4"})}),(0,l.jsx)(h,{variant:"right"===n?"default":"ghost",size:"sm",onClick:()=>r("right"),disabled:i,className:"h-9 w-9 rounded-l-none",children:(0,l.jsx)(K.Z,{className:"h-4 w-4"})})]})]})}function q(e){let{selectedBlockId:t,textBlocks:a,onAddTextBlock:n,onDeleteTextBlock:r,onTextBlockUpdate:i,fontFamily:s,setFontFamily:o,fontSize:c,setFontSize:f,fontStyle:u,setFontStyle:m,fontWeight:x,setFontWeight:g}=e,p=a.find(e=>e.id===t),b=w.find(e=>e.family===s);return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,l.jsx)("div",{className:"text-sm font-medium",children:"Texteinstellungen"}),(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsxs)(h,{variant:"outline",size:"sm",onClick:n,children:[(0,l.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"Neuer Text"]}),t&&(0,l.jsxs)(h,{variant:"outline",size:"sm",onClick:()=>r(t),children:[(0,l.jsx)(_.Z,{className:"w-4 h-4 mr-1"}),"L\xf6schen"]})]})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{children:"Schriftart"}),(0,l.jsxs)(E,{value:s,onValueChange:o,disabled:!t,children:[(0,l.jsx)(T,{children:(0,l.jsx)(L,{placeholder:"W\xe4hle eine Schriftart"})}),(0,l.jsx)(D,{children:w.map(e=>(0,l.jsx)(A,{value:e.family,style:{fontFamily:e.family},children:e.name},e.family))})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{children:"Schriftgewicht"}),(0,l.jsxs)(E,{value:null==x?void 0:x.toString(),onValueChange:e=>g(Number(e)),disabled:!t||!b,children:[(0,l.jsx)(T,{children:(0,l.jsx)(L,{placeholder:"W\xe4hle ein Schriftgewicht"})}),(0,l.jsx)(D,{children:null==b?void 0:b.weights.map(e=>(0,l.jsx)(A,{value:e.value.toString(),style:{fontFamily:s,fontWeight:e.value},children:e.name},e.value))})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{children:"Schriftgr\xf6\xdfe"}),(0,l.jsx)(V,{value:c,onChange:f,min:10,max:150,step:10,disabled:!t})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{children:"Zeilenh\xf6he"}),(0,l.jsx)(V,{value:(null==p?void 0:p.lineHeight)||1.2,onChange:e=>{p&&i({...p,lineHeight:e})},min:.1,max:5,step:.1,disabled:!t,decimalPlaces:1})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{children:"Buchstabenabstand"}),(0,l.jsx)(V,{value:(null==p?void 0:p.letterSpacing)||0,onChange:e=>{p&&i({...p,letterSpacing:e})},min:-5,max:20,step:.1,disabled:!t,decimalPlaces:1})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{children:"Schriftstil & Ausrichtung"}),(0,l.jsx)($,{fontStyle:u,setFontStyle:m,textAlign:(null==p?void 0:p.textAlign)||"left",setTextAlign:e=>{p&&i({...p,textAlign:e})},disabled:!t})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(R,{children:"Textfarbe"}),(0,l.jsx)(G,{selectedBlock:p,onTextBlockUpdate:i,disabled:!t})]})]})]})}function ee(e){let{backgroundColor:t,setBackgroundColor:a,fontFamily:n,setFontFamily:r,fontSize:i,setFontSize:s,fontStyle:o,setFontStyle:d,fontWeight:c,setFontWeight:f,pageSize:u,setPageSize:m,selectedBlockId:x,textBlocks:g,onAddTextBlock:p,onDeleteTextBlock:j,onTextBlockUpdate:w}=e,N=async()=>{try{let e=await C({pageSize:u,backgroundColor:t,content:g}),a=new Blob([e],{type:"application/pdf"}),l=window.URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download="dokument.pdf",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(l)}catch(e){console.error("Fehler bei der PDF-Generierung:",e)}};return(0,l.jsx)("div",{className:"h-full bg-gray-50 p-4 overflow-y-auto",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(b,{children:(0,l.jsx)(v,{className:"pt-6",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(P,{value:u,onChange:m}),(0,l.jsx)(I,{value:t,onChange:a})]})})}),(0,l.jsx)(b,{children:(0,l.jsx)(v,{className:"pt-6",children:(0,l.jsx)(q,{selectedBlockId:x,textBlocks:g,onAddTextBlock:p,onDeleteTextBlock:j,onTextBlockUpdate:w,fontFamily:n,setFontFamily:r,fontSize:i,setFontSize:s,fontStyle:o,setFontStyle:d,fontWeight:c,setFontWeight:f})})}),(0,l.jsxs)(h,{className:"w-full",variant:"outline",size:"sm",onClick:N,children:[(0,l.jsx)(y.Z,{className:"w-4 h-4 mr-1"}),"PDF exportieren"]})]})})}var et=a(8122);function ea(e){let{blocks:t,onTextBlockUpdate:a}=e,[r,i]=(0,n.useState)(t);return(0,n.useEffect)(()=>{i(t)},[t]),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-4",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Ebenen"}),(0,l.jsx)(et.Z5,{onDragEnd:e=>{if(!e.destination)return;let t=Array.from(r),[l]=t.splice(e.source.index,1);t.splice(e.destination.index,0,l),t.forEach((e,l)=>{e.zIndex!==t.length-l&&a({...e,zIndex:t.length-l})})},children:(0,l.jsx)(et.bK,{droppableId:"layers",children:e=>(0,l.jsxs)("div",{...e.droppableProps,ref:e.innerRef,className:"space-y-2",children:[r.map((e,t)=>(0,l.jsx)(et._l,{draggableId:e.id,index:t,children:t=>(0,l.jsx)("div",{ref:t.innerRef,...t.draggableProps,...t.dragHandleProps,className:"bg-gray-50 p-3 rounded flex items-center justify-between hover:bg-gray-100 cursor-move",children:(0,l.jsx)("div",{className:"flex items-center space-x-3",children:(0,l.jsx)("span",{className:"text-sm font-medium",children:e.text||"Leerer Text"})})})},e.id)),e.placeholder]})})})]})}var el=a(2791),en=a(7158),er=a(6369);let ei=el.v2;el.ZA,el.h_,el.Tr,el.Ee;let es=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(el.fC,{ref:t,className:u("flex h-10 items-center space-x-1 rounded-md border bg-background p-1",a),...n})});es.displayName=el.fC.displayName;let eo=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(el.xz,{ref:t,className:u("flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",a),...n})});eo.displayName=el.xz.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,children:r,...i}=e;return(0,l.jsxs)(el.fF,{ref:t,className:u("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground",n&&"pl-8",a),...i,children:[r,(0,l.jsx)(en.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=el.fF.displayName,n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(el.tu,{ref:t,className:u("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})}).displayName=el.tu.displayName;let ed=n.forwardRef((e,t)=>{let{className:a,align:n="start",alignOffset:r=-4,sideOffset:i=8,...s}=e;return(0,l.jsx)(el.h_,{children:(0,l.jsx)(el.VY,{ref:t,align:n,alignOffset:r,sideOffset:i,className:u("z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})})});ed.displayName=el.VY.displayName;let ec=n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,l.jsx)(el.ck,{ref:t,className:u("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",a),...r})});ec.displayName=el.ck.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,checked:r,...i}=e;return(0,l.jsxs)(el.oC,{ref:t,className:u("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...i,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(el.wU,{children:(0,l.jsx)(M.Z,{className:"h-4 w-4"})})}),n]})}).displayName=el.oC.displayName,n.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,l.jsxs)(el.Rk,{ref:t,className:u("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(el.wU,{children:(0,l.jsx)(er.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=el.Rk.displayName,n.forwardRef((e,t)=>{let{className:a,inset:n,...r}=e;return(0,l.jsx)(el.__,{ref:t,className:u("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",a),...r})}).displayName=el.__.displayName;let ef=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,l.jsx)(el.Z0,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...n})});ef.displayName=el.Z0.displayName;let eu=e=>{let{className:t,...a}=e;return(0,l.jsx)("span",{className:u("ml-auto text-xs tracking-widest text-muted-foreground",t),...a})};async function em(e){let t=JSON.stringify(e),a=new Blob([t],{type:"application/json"}),l=document.createElement("a");l.href=URL.createObjectURL(a),l.download="projekt-".concat(Date.now(),".dd"),l.click(),URL.revokeObjectURL(l.href)}async function eh(e){return new Promise((t,a)=>{let l=new FileReader;l.onload=()=>{try{let e=JSON.parse(l.result);if(!e.version||!e.pageSize||!e.backgroundColor||!e.textBlocks)throw Error("Ung\xfcltiges Projektformat");t({version:e.version,pageSize:e.pageSize,backgroundColor:e.backgroundColor,textBlocks:e.textBlocks.map(e=>{var t,a;return{id:e.id||crypto.randomUUID(),text:e.text||e.content||"",x:e.x||(null===(t=e.position)||void 0===t?void 0:t.x)||0,y:e.y||(null===(a=e.position)||void 0===a?void 0:a.y)||0,color:e.color||"#000000",fontFamily:e.fontFamily||"Arial",fontSize:e.fontSize||16,fontWeight:e.fontWeight||400,fontStyle:e.fontStyle||"normal",width:e.width||100,height:e.height||30,zIndex:e.zIndex||0,textAlign:e.textAlign||"left",lineHeight:e.lineHeight||1.2,letterSpacing:e.letterSpacing||0,multiline:e.multiline||!1,selected:e.selected||!1}})})}catch(e){a(Error("Ung\xfcltiges Projektformat"))}},l.onerror=()=>{a(Error("Fehler beim Lesen der Datei"))},l.readAsText(e)})}function ex(e){let{backgroundColor:t,pageSize:a,textBlocks:n,onGeneratePDF:r,onLoadProject:i}=e,s=async()=>{try{await em({version:"1.0.0",pageSize:a,backgroundColor:t,textBlocks:n})}catch(e){console.error("Fehler beim Speichern:",e)}},o=async()=>{try{let e=document.createElement("input");e.type="file",e.accept=".dd",e.onchange=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a)try{let e=await eh(a);console.log("Geladene Projektdaten:",e),i(e)}catch(e){console.error("Fehler beim Laden:",e),alert("Fehler beim Laden der Datei: "+(e instanceof Error?e.message:"Unbekannter Fehler"))}},e.click()}catch(e){console.error("Fehler beim \xd6ffnen:",e),alert("Fehler beim \xd6ffnen der Datei: "+(e instanceof Error?e.message:"Unbekannter Fehler"))}};return(0,l.jsxs)(es,{className:"rounded-none border-0 border-b shadow-sm",children:[(0,l.jsxs)(ei,{children:[(0,l.jsx)(eo,{children:"Datei"}),(0,l.jsxs)(ed,{children:[(0,l.jsxs)(ec,{children:["Neu ",(0,l.jsx)(eu,{children:"⌘N"})]}),(0,l.jsxs)(ec,{onClick:o,children:["\xd6ffnen ",(0,l.jsx)(eu,{children:"⌘O"})]}),(0,l.jsx)(ef,{}),(0,l.jsxs)(ec,{onClick:s,children:["Speichern ",(0,l.jsx)(eu,{children:"⌘S"})]}),(0,l.jsx)(ec,{onClick:r,children:"Als PDF exportieren..."})]})]}),(0,l.jsxs)(ei,{children:[(0,l.jsx)(eo,{children:"Bearbeiten"}),(0,l.jsxs)(ed,{children:[(0,l.jsxs)(ec,{children:["R\xfcckg\xe4ngig ",(0,l.jsx)(eu,{children:"⌘Z"})]}),(0,l.jsxs)(ec,{children:["Wiederholen ",(0,l.jsx)(eu,{children:"⇧⌘Z"})]}),(0,l.jsx)(ef,{}),(0,l.jsxs)(ec,{children:["Ausschneiden ",(0,l.jsx)(eu,{children:"⌘X"})]}),(0,l.jsxs)(ec,{children:["Kopieren ",(0,l.jsx)(eu,{children:"⌘C"})]}),(0,l.jsxs)(ec,{children:["Einf\xfcgen ",(0,l.jsx)(eu,{children:"⌘V"})]})]})]}),(0,l.jsxs)(ei,{children:[(0,l.jsx)(eo,{children:"Ansicht"}),(0,l.jsxs)(ed,{children:[(0,l.jsx)(ec,{children:"Zoom In"}),(0,l.jsx)(ec,{children:"Zoom Out"}),(0,l.jsx)(ef,{}),(0,l.jsx)(ec,{children:"Gitter anzeigen"}),(0,l.jsx)(ec,{children:"Lineale anzeigen"})]})]})]})}function eg(){let[e,t]=(0,n.useState)("#ffffff"),[a,r]=(0,n.useState)("Inter"),[i,s]=(0,n.useState)(35),[o,d]=(0,n.useState)("normal"),[c,f]=(0,n.useState)(400),[u,m]=(0,n.useState)("p1"),[h,x]=(0,n.useState)(25),[g,b]=(0,n.useState)(10),[v,y]=(0,n.useState)([]),[j,w]=(0,n.useState)(null),[N,k]=(0,n.useState)(!1),[S,C]=(0,n.useState)(!1),z=(0,n.useRef)(0),R=(0,n.useRef)(0),B=(0,n.useRef)(0),F=(0,n.useRef)(0),M=(0,n.useCallback)(e=>{if(N||S){if(N){let t=window.innerWidth;x(Math.round(10*Math.min(Math.max(20,(t-e.clientX)/t*100),80))/10)}if(S){let t=window.innerHeight;b(Math.round(10*Math.min(Math.max(20,(t-e.clientY)/t*100),80))/10)}}},[N,S]),E=(0,n.useCallback)(()=>{k(!1),C(!1)},[]);(0,n.useEffect)(()=>((N||S)&&(document.addEventListener("mousemove",M),document.addEventListener("mouseup",E)),()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",E)}),[N,S,M,E]);let T=(0,n.useCallback)(e=>{y(t=>t.map(t=>t.id===e.id?e:t))},[]),L=(0,n.useCallback)(e=>{w(e),y(t=>t.map(t=>({...t,selected:t.id===e})))},[]),D=(0,n.useCallback)(()=>{let e={id:Math.random().toString(36).substr(2,9),text:"Neuer Text",x:50,y:50,color:"#FFCCE7",fontFamily:a,fontSize:i,fontWeight:c,fontStyle:o,width:100,height:30,zIndex:v.length,textAlign:"center",lineHeight:1.2,letterSpacing:0,multiline:!1,selected:!0};y([...v.map(e=>({...e,selected:!1})),e]),w(e.id)},[v,a,i,c,o]),A=(0,n.useCallback)(e=>{y(t=>t.filter(t=>t.id!==e)),w(null)},[]),P=(0,n.useCallback)(()=>{},[]),W=(0,n.useCallback)(e=>{t(e.backgroundColor),m(e.pageSize),y(e.textBlocks)},[]);return(0,n.useEffect)(()=>{j&&y(e=>e.map(e=>e.id===j?{...e,fontFamily:a}:e))},[a,j]),(0,n.useEffect)(()=>{j&&y(e=>e.map(e=>e.id===j?{...e,fontSize:i}:e))},[i,j]),(0,n.useEffect)(()=>{j&&y(e=>e.map(e=>e.id===j?{...e,fontStyle:o}:e))},[o,j]),(0,n.useEffect)(()=>{j&&y(e=>e.map(e=>e.id===j?{...e,fontWeight:String(c)}:e))},[c,j]),(0,l.jsxs)("div",{className:"flex h-screen",children:[(0,l.jsxs)("div",{className:"relative flex flex-col",style:{width:"".concat(100-h,"%")},children:[(0,l.jsx)("div",{className:"sticky top-0 z-50 bg-background border-b",children:(0,l.jsx)(ex,{backgroundColor:e,pageSize:u,textBlocks:v,onGeneratePDF:P,onLoadProject:W})}),(0,l.jsx)(p,{backgroundColor:e,fontFamily:a,fontSize:i,fontStyle:o,fontWeight:String(c),pageSize:u,textBlocks:v,onTextBlockUpdate:T,onTextBlockSelect:L,onAddTextBlock:D})]}),(0,l.jsxs)("div",{className:"flex relative",style:{width:"".concat(h,"%")},children:[(0,l.jsxs)("div",{className:"absolute left-[-4px] top-0 h-full w-2 cursor-ew-resize group z-50",onMouseDown:e=>{k(!0),z.current=e.clientX,B.current=h},children:[(0,l.jsx)("div",{className:"absolute left-[3px] top-0 h-full w-[2px] bg-gray-300 group-hover:bg-gray-400"}),(0,l.jsx)("div",{className:"absolute left-[0px] top-1/2 -translate-y-1/2 w-[8px] h-[80px] rounded-sm bg-gray-300 group-hover:bg-gray-400"})]}),(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsx)(ee,{selectedBlockId:j,textBlocks:v,onAddTextBlock:D,onDeleteTextBlock:A,onTextBlockUpdate:T,fontFamily:a,setFontFamily:r,fontSize:i,setFontSize:s,fontStyle:o,setFontStyle:d,fontWeight:c,setFontWeight:f,pageSize:u,setPageSize:m,backgroundColor:e,setBackgroundColor:t}),(0,l.jsxs)("div",{className:"relative flex-1",children:[(0,l.jsxs)("div",{className:"absolute top-[-4px] left-0 right-0 h-2 cursor-ns-resize group z-50",onMouseDown:e=>{C(!0),R.current=e.clientY,F.current=g},children:[(0,l.jsx)("div",{className:"absolute top-[3px] left-0 right-0 h-[2px] bg-gray-300 group-hover:bg-gray-400"}),(0,l.jsx)("div",{className:"absolute top-[0px] left-1/2 -translate-x-1/2 h-[8px] w-[80px] rounded-sm bg-gray-300 group-hover:bg-gray-400"})]}),(0,l.jsx)("div",{style:{height:"".concat(g,"vh")},children:(0,l.jsx)(ea,{blocks:v,onTextBlockUpdate:T})})]})]})]})]})}eu.displayname="MenubarShortcut"}},function(e){e.O(0,[505,338,470,971,938,744],function(){return e(e.s=1693)}),_N_E=e.O()}]);